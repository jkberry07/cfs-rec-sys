<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ME/CFS Recovery Pathfinder - Survey</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <header>
    <div class="wave-container">
      <h1>ME/CFS Recovery Pathfinder</h1>
      <p class="tagline"></p>
      <div class="wave"></div>
    </div>
  </header>
    
  <nav class="main-nav">
    <div class="nav-container">
      <a href="/" class="nav-link">Home</a>
      <a href="/about" class="nav-link">About</a>
      <a href="/brain-retraining" class="nav-link">What is Brain Retraining/Nervous System Regulation</a>
      <a href="/my-story" class="nav-link">My Recovery Story</a>
      <a href="/contact" class="nav-link">Contact</a>
      <a href="/survey" class="nav-link start-survey">Start Survey</a>
    </div>
  </nav>
    
  <div class="container">
    <form action="/recommendations" method="post" class="survey-form">
      <section class="quiz-section">
        <h2>Short-Answer Questions</h2>
        <p>Answer three questions of your choice in 2-3 sentences, more if you wish, focusing on what you would most like to see reflected in a recovery program. Your answers will be compared with text from program websites to get an idea of which programs might be the best fit with your values and perspective.</p>
        <p>After you submit the survey, you will be shown the top 3 programs based on your answers and filters, with links to the programs so you can learn more. You will also have the option to see the full list of programs ranked by how well they match your answers.</p>
        
        <!-- Question 1 -->
        <div class="question">
          <select id="question1" name="question1" class="question-select">
            <option value="">Select a question...</option>
            <option value="brain-retraining">What do you hope to gain from brain retraining, besides recovery? (RECOMMENDED)</option>
            <option value="proud">What in your life are you proudest of?</option>
            <option value="values">What core values guide your decisions and why?</option>
            <option value="admire">What are some qualities of a person you greatly admire and why?</option>
            <option value="purpose">What do you believe is the purpose of life?</option>
            <option value="growth">How do you approach personal growth and development?</option>
            <option value="happiness">What does happiness mean to you?</option>
            <option value="lessons">What important lessons has life taught you?</option>
          </select>
          <textarea id="answer1" name="answer1" rows="5" placeholder="Your response..."></textarea>
        </div>
          
        <!-- Question 2 -->
        <div class="question">
          <select id="question2" name="question2" class="question-select">
            <option value="">Select a question...</option>
            <option value="brain-retraining">What do you hope to gain from brain retraining, besides recovery? (RECOMMENDED)</option>
            <option value="proud">What in your life are you proudest of?</option>
            <option value="values">What core values guide your decisions and why?</option>
            <option value="admire">What are some qualities of a person you greatly admire and why?</option>
            <option value="purpose">What do you believe is the purpose of life?</option>
            <option value="growth">How do you approach personal growth and development?</option>
            <option value="happiness">What does happiness mean to you?</option>
            <option value="lessons">What important lessons has life taught you?</option>
          </select>
          <textarea id="answer2" name="answer2" rows="5" placeholder="Your response..."></textarea>
        </div>
        
        <!-- Question 3 -->
        <div class="question">
          <select id="question3" name="question3" class="question-select">
            <option value="">Select a question...</option>
            <option value="brain-retraining">What do you hope to gain from brain retraining, besides recovery? (RECOMMENDED)</option>
            <option value="proud">What in your life are you proudest of?</option>
            <option value="values">What core values guide your decisions and why?</option>
            <option value="admire">What are some qualities of a person you greatly admire and why?</option>
            <option value="purpose">What do you believe is the purpose of life?</option>
            <option value="growth">How do you approach personal growth and development?</option>
            <option value="happiness">What does happiness mean to you?</option>
            <option value="lessons">What important lessons has life taught you?</option>
          </select>
          <textarea id="answer3" name="answer3" rows="5" placeholder="Your response..."></textarea>
        </div>
      </section>
        
      <section class="filters">
        <h2>Program Filters</h2>
        <p>For programs that are paid monthly, the price shown is over the course of 6 months.</p>
        
        <div class="filter-options">
          <!-- Price Range -->
          <div class="filter-group">
            <label for="max-price">Maximum Price ($, USD):</label>
            <input type="number" id="max-price" name="max-price" min="300" max="1000" step="10" value="0">
          </div>
            
            <!-- Toggleable Filters -->
          <div class="filter-toggles">
            <!-- Refund Policy -->
            <div class="filter-row">
                <span class="filter-label">Refund Policy or Free Trial:</span>
                <label class="toggle-switch">
                    <input type="checkbox" name="refund" value="true">
                    <span class="slider"></span>
                </label>
                <span> </span>
            </div>
              
              <!-- Financial Aid -->
            <div class="filter-row">
                <span class="filter-label">Financial Aid Available:</span>
                <label class="toggle-switch">
                    <input type="checkbox" name="financial-aid" value="true">
                    <span class="slider"></span>
                </label>
                <span> </span>
            </div>
              
            <!-- Coaching Options -->
            <div class="filter-row">
                <span class="filter-label">Coaching Options:</span>
                <label class="toggle-switch">
                    <input type="checkbox" name="coaching" value="true">
                    <span class="slider"></span>
                </label>
                <span> </span>
            </div>
              
            <!-- Community Element -->
            <div class="filter-row">
              <span class="filter-label">Community Element:</span>
              <label class="toggle-switch">
                <input type="checkbox" name="community" value="true">
                <span class="slider"></span>
              </label>
              <span> </span>
            </div>
              
            <!-- Forum Element -->
            <div class="filter-row">
              <span class="filter-label">Forum Element:</span>
              <label class="toggle-switch">
                <input type="checkbox" name="forum" value="true">
                <span class="slider"></span>
              </label>
              <span> </span>
            </div>
          </div>
        </div>
      </section>
        
      <div class="submit-section">
          <button type="submit" class="submit-btn">Submit Responses</button>
      </div>
    </form>
  </div>
    
  <footer>
        <p>Disclaimer: The content in and throughout this website is for informational and educational purposes only, and is not a substitute for medical diagnosis, treatment or advice.</p>
  </footer>

  <script>
      // Simple script to prevent duplicate question selections
    document.addEventListener('DOMContentLoaded', function() {
      const selects = [
        document.getElementById('question1'),
        document.getElementById('question2'),
        document.getElementById('question3')
      ];
        
      selects.forEach(select => {
        select.addEventListener('change', function() {
          const currentValue = this.value;
          if (!currentValue) return;
            
          // Disable this option in other selects
          selects.forEach(otherSelect => {
            if (otherSelect !== this) {
                  Array.from(otherSelect.options).forEach(option => {
                    if (option.value === currentValue && otherSelect.value !== currentValue) {
                        option.disabled = true;
                    }
                });
            }
          });
          
            // Re-enable all options that aren't selected in any dropdown
          const selectedValues = selects.map(s => s.value).filter(v => v);
          selects.forEach(s => {
            Array.from(s.options).forEach(option => {
              if (option.value && !selectedValues.includes(option.value) || option.value === s.value) {
                  option.disabled = false;
              }
            });
          });
        });
      });
    });
    // Handle page visibility change (detect when coming back from browser back button)
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden && formSubmitted) {
          // Page became visible and form was previously submitted
          // Remove any loading overlays
          const overlay = document.querySelector('.loading-overlay');
          if (overlay) {
            overlay.remove();
          }
          formSubmitted = false;
        }
      });
      
      // Handle pageshow event (fires when page is loaded from cache)
      window.addEventListener('pageshow', function(event) {
        if (event.persisted) {
          // Page was loaded from cache (browser back button)
          const overlay = document.querySelector('.loading-overlay');
          if (overlay) {
            overlay.remove();
          }
          formSubmitted = false;
        }
      });
  </script>

<script>
  // Loading overlay functionality
  document.addEventListener('DOMContentLoaded', function() {
    const surveyForm = document.querySelector('.survey-form');
    
    if (surveyForm) {
      surveyForm.addEventListener('submit', function(e) {
        // Validate form before showing loading overlay
        const question1 = document.getElementById('question1').value;
        const answer1 = document.getElementById('answer1').value.trim();
        const question2 = document.getElementById('question2').value;
        const answer2 = document.getElementById('answer2').value.trim();
        const question3 = document.getElementById('question3').value;
        const answer3 = document.getElementById('answer3').value.trim();
        
        if (!question1 || !answer1 || !question2 || !answer2 || !question3 || !answer3) {
          e.preventDefault();
          alert('Please select and answer all three questions before submitting.');
          return;
        }
        
        // Create and show loading overlay
        const overlay = document.createElement('div');
        overlay.className = 'loading-overlay';
        
        const spinnerContainer = document.createElement('div');
        spinnerContainer.style.textAlign = 'center';
        
        const spinner = document.createElement('div');
        spinner.className = 'loading-spinner';
        
        const loadingText = document.createElement('div');
        loadingText.className = 'loading-text';
        loadingText.textContent = 'Generating recommendations...';
        
        spinnerContainer.appendChild(spinner);
        spinnerContainer.appendChild(loadingText);
        overlay.appendChild(spinnerContainer);
        document.body.appendChild(overlay);

        // Set a timeout to remove overlay if something goes wrong
          setTimeout(function() {
            if (overlay && overlay.parentNode) {
              overlay.remove();
              formSubmitted = false;
            }
          }, 60000); // 60 second timeout
      });
    }
  });
</script>
</body>
</html>